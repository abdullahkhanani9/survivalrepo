---
layout: post
title: Predictor
permalink: /ml
---
<html lang="en">
<head>
    <title>Slide Navbar</title>
    <link rel="stylesheet" type="text/css" href="ml-styles.css">
</head>
<body>
    <div class="main">        
        <input type="checkbox" id="chk" aria-hidden="true">
        <div class="signup">
            <form id="titanic-form">
                <label for="chk" aria-hidden="true">Titanic Survival Predictor</label>
                <p id="result" aria-hidden="true"></p>
                <input id="Name" placeholder="Name" required="">
                <select id="pclass">
                    <option disabled selected>Select Passenger Class</option>
                    <option value="1">1st Class</option>
                    <option value="2">2nd Class</option>
                    <option value="3">3rd Class</option>
                </select>
                <select id="sex">
                    <option disabled selected>Select Gender</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                </select>
                <input id="age" placeholder="Age" required="">
                <input id="fare" placeholder="Fare" required="">
                <input id="embarked" placeholder="Embarked (C/Q/S)" required="">
                <input id="sibsp" placeholder="# of siblings/spouses aboard">
                <input id="parch" placeholder="# of parents/children aboard">
                <select id="alone">
                    <option disabled selected>Are you traveling alone?</option>
                    <option value="True">Yes</option>
                    <option value="False">No</option>
                </select>
                <button type="button" onclick="mltitanic()">Predict</button>
            </form>
        </div>
        <div class="login">
            <form id="extra-form">
                <label for="chk" aria-hidden="true">Extra</label>
                <p id="resultx" aria-hidden="true"></p>
                <select id="TimeOfDay">
                    <option disabled selected>Time of Day</option>
                    <option value="morning">Morning</option>
                    <option value="afternoon">Afternoon</option>
                </select>
                <select id="DayOfWeek">
                    <option disabled selected>Day of Week</option>
                    <option value="weekend">Weekend</option>
                    <option value="weekday">Weekday</option>
                </select>
                <input type="time" id="time" name="time">
                <button type="button" onclick="extra()">Predict</button>
            </form>
        </div>
    </div>
<script>
    function mltitanic() {
        var dom = document.getElementById('result');
        var name = document.getElementById('Name').value;
        var pclass = document.getElementById('pclass').value;
        var sex = document.getElementById('sex').value;
        var age = document.getElementById('age').value;
        var fare = document.getElementById('fare').value;
        var embarked = document.getElementById('embarked').value;
        var sibsp = document.getElementById('sibsp').value;
        var parch = document.getElementById('parch').value;
        var alone = document.getElementById('alone').value;
        var passenger = {
            name: name,
            pclass: pclass,
            sex: sex,
            age: age,
            fare: fare,
            embarked: embarked,
            sibsp: sibsp,
            parch: parch,
            alone: alone
        };
        var url = 'http://127.0.0.1:8086/api/titanic/predict';
        var json = JSON.stringify(passenger);
        const authOptions = {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: json,
            credentials: 'include'
        };
        fetch(url, authOptions)
            .then(response => response.json())
            .then(data => {
                console.log('success', data);
                dom.innerText = "Survival Probability: " + data["Survival probability"];
            })
            .catch(error => {
                console.error('error', error);
                dom.innerText = "Error occurred";
            });
    }

    function extra() {
        var dom = document.getElementById('resultx');
        var TimeOfDay = document.getElementById('TimeOfDay').value;
        var DayOfWeek = document.getElementById('DayOfWeek').value;
        var time = document.getElementById('time').value;
        var payload = {
            TimeOfDay: TimeOfDay,
            DayOfWeek: DayOfWeek,
            time: time
        };
        var url = 'http://127.0.0.1:8086/api/titanic/';
        var json = JSON.stringify(payload);
        const authOptions = {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: json,
            credentials: 'include'
        };
        fetch(url, authOptions)
            .then(response => response.json())
            .then(data => {
                console.log('success', data);
                dom.innerText = "Result: " + data["Result"];
            })
            .catch(error => {
                console.error('error', error);
                dom.innerText = "Error occurred";
            });
    }
</script>
</body>
</html>
